/*!
 * tire.js
 * Copyright (c) 2012-2013 Fredrik Forsmo
 * Version: 1.1.0-wip
 * Released under the MIT License.
 */
(function(e,t){function h(e,t){var r="";return n.defaultView&&n.defaultView.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),r=n.defaultView.getComputedStyle(e,"").getPropertyValue(t)):e.currentStyle?r=e.currentStyle[t]:r=e.style[t],r?r:""}function d(e){var t=n.createElement("div");return c.isString(e)?t.innerHTML=e:t.appendChild(e),t}function g(e){return e._eventId||(e._eventId=v++)}function y(e,t){return m[e]=m[e]||{},m[e][t]=m[e][t]||[]}function b(e,t,n){var r=g(e),i=y(r,t),s=function(t){n.call(e,t)===!1&&(t.preventDefault(),t.stopPropagation())};return s.guid=n.guid=n.guid||++v,i.push(s),s}function w(e,t,n){var r=b(e,t,n);e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)}function E(e,t,n){var r=g(e),i=y(r,t);for(var s=0;s<i.length;s++)if(n===undefined||n.guid===i[s].guid){if(e.removeEventListener)e.removeEventListener(t,i[s],!1);else if(e.detachEvent){var o="on"+t;c.isStr(e[o])&&(e[o]=null),e.detachEvent(o,i[s])}m[r][t].remove(s,1)}delete m[r]}function S(e,t){c.each(e.split(" "),function(e){t(e)})}function x(t,r){var i=(i=/callback\=([A-Za-z0-9\-\.]+)/.exec(t))?i[1]:"jsonp"+ +(new Date),s=n.createElement("script");s.onerror=function(){c(s).remove();try{delete e[i]}catch(t){e[i]=undefined}c.isFun(r.error)&&r.error("abort")},e[i]=function(t){c(s).remove();try{delete e[i]}catch(n){e[i]=undefined}T(t,null,r)},r.data=c.param(r.data),s.src=t.replace(/\=\?/,"="+i),c("head")[0].appendChild(s)}function T(e,t,n){var r;t&&((n.dataType==="json"||!1)&&(r=c.parseJSON(t.responseText))===null&&(r=t.responseText),n.dataType==="xml"&&(r=t.responseXML),r=r||t.responseText),!r&&e&&(r=e),c.isFunction(n.success)&&n.success(r)}var n=e.document,r=e.tire,i=e.$,s=/^#/,o=/^\./,u=/^[\w-]+$/,a=/<([\w:]+)/,f=[].slice;Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)};try{f.call(n.documentElement.childNodes,0)[0].nodeType}catch(l){f=function(e){e=e||0;var t,n=[];for(;t=this[e];e++)n.push(t);return n}}var c=function(e,t){return new c.fn.find(e,t)};c.fn=c.prototype={length:0,extend:function(e){for(var t in e)this[t]=e[t]},find:function(t,r){var i=[],l;if(!t)return this;if(c.isFunction(t))return c.ready(t);if(t.nodeType)return this.selector="",this.context=t,this.set([t]);if(t.length===1&&t[0].nodeType)return this.selector=t.selector,this.context=t[0],this.set(t);r=this.context?this.context:r||n,c.isPlainObject(r)&&(l=r,r=n);if(c.isString(t)){this.selector=t;if(s.test(t)&&r.nodeType==r.DOCUMENT_NODE)i=(i=r.getElementById(t.substr(1)))?[i]:[];else if(r.nodeType!==1&&r.nodeType!==9)i=[];else if(a.test(t)){var h=r.createElement("div");h.innerHTML=t,this.each.call(f.call(h.childNodes,0),function(){i.push(this)})}else i=f.call(o.test(t)&&r.getElementsByClassName!==undefined?r.getElementsByClassName(t.substr(1)):u.test(t)?r.getElementsByTagName(t):r.querySelectorAll(t))}else t.nodeName||t===e?i=[t]:c.isArray(t)&&(i=t);return t.selector!==undefined?(this.selector=t.selector,this.context=t.context):this.context===undefined&&(i[0]!==undefined?this.context=i[0]:this.context=n),this.set(i).each(function(){return l&&$(this).attr(l)})},pluck:function(e){var t=[];return this.each(function(){this[e]&&t.push(this[e])}),t},each:function(e,t){var n,r;typeof e=="function"&&(t=e,e=this);if(e===this||e instanceof Array){for(n=0;n<e.length;++n)if(t.call(e[n],e[n],n,e)===!1)break}else for(r in e)if(e.hasOwnProperty(r)&&t.call(e[r],r,e[r])===!1)break;return e},set:function(e){var t=0;for(;t<e.length;t++)this[t]=e[t];return this.length=t,this}},c.extend=function(){var e=arguments[0]||{};return typeof e!="object"&&typeof e!="function"&&(e={}),arguments.length===1&&(e=this),c.fn.each(f.call(arguments),function(t){for(var n in t)e[n]!==t[n]&&(e[n]=t[n])}),e},c.fn.find.prototype=c.fn,c.extend({slice:f,each:c.fn.each,trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},matches:function(e,t){if(!e||e.nodeType!==1)return!1;var r=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);if(n.querySelectorAll!==undefined){var i=e.parentNode.querySelectorAll(t);for(var s=0;s<i.length;s++)if(i[s]===e)return!0}return!1},isFunction:function(e){return typeof e=="function"},isArray:function(e){return e instanceof Array},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isObject:function(e){return e instanceof Object&&!this.isArray(e)&&!this.isFunction(e)},isPlainObject:function(e){if(!e||!this.isObject(e)||this.isWindow(e)||e.nodeType)return!1;if(e.__proto__===Object.prototype)return!0;var t;for(t in e);return t===undefined||{}.hasOwnProperty.call(e,t)},isWindow:function(e){return e!==null&&e===e.window},parseJSON:function(t){if(!this.isString(t)||!t)return null;t=this.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);try{return(new Function("return "+t))()}catch(n){return null}},noConflict:function(t){return t&&(e.tire=r),e.$=i,c}}),c.fn.extend({addClass:function(e){if(e&&c.isString(e))return this.each(function(t){if(t.nodeType===1){var n=e.split(/\s+/);if(!t.className&&n.length===1)t.className=e;else{var r=t.className;for(var i=0;i<n.length;i++)r.indexOf(n[i])===-1&&(r+=" "+n[i]);t.className=c.trim(r)}}})},removeClass:function(e){return this.each(function(t){if(e&&c.isString(e)){var n=e.split(/\s+/);if(t.nodeType===1&&t.className){if(n.length===1)t.className=t.className.replace(e,"");else for(var r=0;r<n.length;r++)t.className=t.className.replace(n[r],"");t.className=c.trim(t.className.replace(/\s{2}/g," ")),t.className===""&&t.removeAttribute("class")}}})},hasClass:function(e){var t=(this[0]?this[0]:this).className.split(/\s+/),n=e.split(/\s+/),r=0;if(n.length>1){var i=!1;for(r=0;r<n.length;r++)i=this.hasClass.call(this,n[r]);return i}if(c.isString(e)){for(r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}},attr:function(e,t){if(c.isObject(e))return this.each(function(){for(var t in e)this.setAttribute(t,e[t])});if(t&&(c.isString(t)||c.isNumber(t)))return this.each(function(){this.setAttribute(e,t)});if(c.isString(e)){var n;for(var r=0;r<this.length;r++){if((n=this[r].getAttribute(e))!==null)break;continue}return n}},removeAttr:function(e){return this.each(function(){if(e&&this.nodeType===1){var t=e.split(/\s+/);for(var n=0;n<t.length;n++)this.removeAttribute(t[n])}})}}),c.fn.extend({css:function(e,t){return c.isString(e)&&t===undefined?this.length>0?h(this[0],e):undefined:this.each(function(){if(c.isString(e))this.style[e]=t;else for(var n in e)this.style[n]=e[n]})},hide:function(){return this.css("display","none")},show:function(){return this.css("display","")}});var p=function(){function u(){t?n.removeEventListener("DOMContentLoaded",u,!1):n.readyState==="complete"&&n.detachEvent("onreadystatechange",u),f()}function a(){if(r)return;try{s.doScroll("left")}catch(e){setTimeout(a,10)}f()}function f(){if(r)return;r=!0;for(var e=0;e<o.length;e++)o[e].call(n,c)}var t=!!n.addEventListener,r=!1,i=!1,s=n.documentElement,o=[];return t?(n.addEventListener("DOMContentLoaded",u,!0),e.addEventListener("load",f,!1)):(n.attachEvent("onreadystatechange",u),e.attachEvent("onload",f),s.doScroll&&e===e.top&&a()),function(e){return r?e.call(n,c):o.push(e)}}();c.ready=c.fn.ready=p,c.fn.extend({is:function(e){return this.length>0&&c.matches(this[0],e)},closest:function(e,t){var n=this[0];while(n&&!c.matches(n,e)){n=n.parentNode;if(!n||!n.ownerDocument||n===t||n.nodeType===11)break}return c(n)},parent:function(e){var t=this.pluck("parentNode");return e===undefined?c(t):c(t).filter(e)},children:function(e){var t=[];return this.each(function(){c.each(c.slice.call(this.children,0),function(e){t.push(e)})}),e===undefined?c(t):c(t).filter(e)},text:function(e){return e===undefined?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},val:function(e){return e===undefined?this.length>0?this[0].multiple?this.find("option").filter(function(){return this.selected}).pluck("value"):this[0].value:null:this.each(function(){this.value=e})},empty:function(){return this.each(function(){this.innerHTML=""})},html:function(e,t){return arguments.length===0?this.length>0?this[0].innerHTML:null:(t=t||"inner",e instanceof c&&(e=e[0]),this.each(function(){if(t==="inner")c.isString(e)||c.isNumber(e)?this.innerHTML=e:(this.innerHTML="",this.appendChild(e));else if(t==="remove")this.parentNode.removeChild(this);else{var n=d(e),r=n.childNodes,i;t==="prepend"?this.insertBefore(n,this.firstChild):t==="append"?this.insertBefore(n,null):t==="before"?this.parentNode.insertBefore(n,this):t==="after"&&this.parentNode.insertBefore(n,this.nextElementSibling?this.nextElementSibling:this.nextSibling),i=n.parentNode;while(r.length)i.insertBefore(r[0],n);i.removeChild(n)}}))}}),c.each(["prepend","append","before","after","remove"],function(e){c.fn[e]=function(e){return function(t){return this.html(t,e)}}(e)}),c.fn.extend({filter:function(e){if(c.isFunction(e)){var t=[];return this.each(function(n,r){e.call(n,r)&&t.push(n)}),c(t)}return this.filter(function(){return c.matches(this,e)})},not:function(e){return this.filter(function(){return!c.matches(this,e)})},eq:function(e){return e===-1?c(f.call(this,this.length-1)):c(f.call(this,e,e+1))}});var v=1,m={};c.events=c.events||{},c.fn.extend({on:function(e,t){return this.each(function(){var n=this;S(e,function(e){w(n,e,t)})})},off:function(e,t){return this.each(function(){var n=this;S(e,function(e){E(n,e,t)})})},trigger:function(e,t){return this.each(function(r){r===n&&!r.dispatchEvent&&(r=n.documentElement);var i,s=!!n.createEvent;s?(i=n.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):(i=n.createEventObject(),i.cancelBubble=!0),i.data=t||{},i.eventName=e;if(s)r.dispatchEvent(i);else try{r.fireEvent("on"+e,i)}catch(o){r.attachEvent("onpropertychange",function(t){if(t.eventName===e&&t.srcElement._eventId){var n=y(t.srcElement._eventId,t.eventName);if(n.length)for(var r=0;r<n.length;r++)n[r](t)}}),r.fireEvent("onpropertychange",i)}})}}),c.fn.extend({ajax:function(t,n){n=n||{},c.isObject(t)&&(c.isFunction(n)&&(t.success=t.success||n),n=t,t=n.url),c.isFunction(n)&&(n={success:n}),n.dataType=(n.dataType||"").toLowerCase();if(!t)return;var r=this,i=(n.type||"GET").toUpperCase(),s=n.data||null,o=n.dataType==="jsonp"||!1,u,a={html:"text/html",text:"text/plain",xml:"application/xml, text/xml",json:"application/json"};e.XMLHttpRequest?u=new XMLHttpRequest:e.ActiveXObject&&(u=new ActiveXObject("Microsoft.XMLHTTP"));for(var f in a)t.indexOf("."+f)!==-1&&!n.dataType&&(n.dataType=f);if(o||/\=\?|callback\=/.test(t))return/\=\?/.test(t)&&(t=(t+"&callback=?").replace(/[&?]{1,2}/,"?")),x(t,n),this;if(u){u.queryString=s,u.open(i,t,!0),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),(a=a[n.dataType])!==undefined&&(u.setRequestHeader("Accept",a),a.indexOf(",")!==-1&&(a=a.split(",")[0]),u.overrideMimeType&&u.overrideMimeType(a)),(n.contentType||n.data&&i!=="GET")&&u.setRequestHeader("Content-Type",n.contentType||"application/x-www-form-urlencoded");for(var l in n.headers)n.headers.hasOwnProperty(l)&&u.setRequestHeader(l,n.headers[l]);u.onreadystatechange=function(){u.readyState===4&&(u.status>=200&&u.status<300||u.status===304?n.success!==undefined&&T(null,u,n):n.error!==undefined&&n.error(u,n))},u.send(c.param(s))}return this}}),c.extend({ajax:c.fn.ajax,param:function(e,t){var n=[];return this.each(e,function(e,r){var i=t?t+"["+e+"]":e;n.push(c.isObject(r)?c.param(r,i):encodeURIComponent(i)+"="+encodeURIComponent(r))}),n.join("&").replace("%20","+")}}),e.$=e.tire=c,typeof define=="function"&&define.amd&&define("tire",[],function(){return c})})(window);